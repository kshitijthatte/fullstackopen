{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/people.js","App.js","index.js"],"names":["Filter","handleFiltering","onChange","PersonForm","addName","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","value","type","Persons","filteredPersons","deletePerson","map","person","name","number","onClick","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","SuccessNotification","message","className","ErrorNotification","App","useState","persons","setPersons","setNewName","setNewNumber","setFilteredPersons","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","peopleService","initialPeople","event","filtered","filter","toLowerCase","includes","target","preventDefault","upadtePerson","find","window","confirm","returendPerson","setTimeout","catch","error","concat","res","p","err","console","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f7f9395f.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ handleFiltering }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input onChange={handleFiltering} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addName,\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addName}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ filteredPersons, deletePerson }) => {\r\n  return (\r\n    <>\r\n      {filteredPersons.map((person) => (\r\n        <p key={person.name}>\r\n          {person.name} {person.number}\r\n          <button onClick={() => deletePerson(person)}>delete</button>\r\n        </p>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, deletePerson };\r\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport peopleService from \"./services/people\";\n\nconst SuccessNotification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n  return <div className=\"success\">{message}</div>;\n};\n\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n  return <div className=\"error\">{message}</div>;\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filteredPersons, setFilteredPersons] = useState([]);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    peopleService.getAll().then((initialPeople) => {\n      setPersons(initialPeople);\n      setFilteredPersons(initialPeople);\n    });\n  }, []);\n\n  const addName = (event) => {\n    event.preventDefault();\n    const newObject = {\n      name: newName,\n      number: newNumber,\n    };\n    const upadtePerson = persons.find(\n      (person) => person.name === newObject.name\n    );\n    if (upadtePerson) {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with new one?`\n        )\n      ) {\n        peopleService\n          .update(upadtePerson.id, newObject)\n          .then((returendPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== upadtePerson.id ? person : returendPerson\n              )\n            );\n            setFilteredPersons(\n              persons.map((person) =>\n                person.id !== upadtePerson.id ? person : returendPerson\n              )\n            );\n            setSuccessMessage(`Updated ${returendPerson.name}`);\n            setTimeout(() => {\n              setSuccessMessage(null);\n            }, 3000);\n          })\n          .catch((error) => {\n            setErrorMessage(error.response.data);\n          });\n      }\n    } else {\n      peopleService\n        .create(newObject)\n        .then((returendPerson) => {\n          setPersons(persons.concat(returendPerson));\n          setFilteredPersons(persons.concat(returendPerson));\n          setSuccessMessage(`Added ${returendPerson.name}`);\n          setTimeout(() => {\n            setSuccessMessage(null);\n          }, 3000);\n        })\n        .catch((error) => {\n          setErrorMessage(error.response.data);\n        });\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleNameChange = (event) => setNewName(event.target.value);\n\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n\n  const handleFiltering = (event) => {\n    const filtered = persons.filter((person) =>\n      person.name.toLowerCase().includes(event.target.value)\n    );\n    setFilteredPersons(filtered);\n  };\n\n  const deletePerson = (person) => {\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      peopleService\n        .deletePerson(person.id)\n        .then((res) => {\n          setPersons(persons.filter((p) => p.id !== person.id));\n          setFilteredPersons(persons.filter((p) => p.id !== person.id));\n        })\n        .catch((err) => {\n          console.log(err);\n          setErrorMessage(`${person.name} was already deleted from server`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n          setPersons(persons.filter((p) => p.id !== person.id));\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <SuccessNotification message={successMessage} />\n      <ErrorNotification message={errorMessage} />\n      <Filter handleFiltering={handleFiltering} />\n      <h2>add a new</h2>\n      <PersonForm\n        addName={addName}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons filteredPersons={filteredPersons} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}